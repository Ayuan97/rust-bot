# 🚀 快速开始 - 游戏内命令系统

本指南将帮助你在 5 分钟内开始使用 Rust+ 机器人的命令系统。

## 📋 前置条件

在开始之前，请确保：

1. ✅ 已启动后端服务 (`npm start`)
2. ✅ 已连接到 Rust 服务器（在 Dashboard 中点击"连接"）
3. ✅ 在游戏中加入了该服务器，并且在队伍中

## 🎮 第一个命令

### 步骤 1: 测试机器人

在游戏中按 `Enter` 打开队伍聊天，输入：

```
!ping
```

如果一切正常，你会看到机器人回复：

```
🏓 Pong! 机器人运行正常
```

### 步骤 2: 查看帮助

输入以下命令查看所有可用命令：

```
!help
```

你会看到完整的命令列表。

### 步骤 3: 试试实用命令

#### 查看游戏时间
```
!time
```

**回复示例：**
```
☀️ 游戏时间: 14:23
🌅 日出: 06:30
🌇 日落: 18:45
```

#### 查看在线队友
```
!online
```

**回复示例：**
```
👥 队伍成员 (3/5 在线):

🟢 在线:
  • PlayerOne ✅ 存活
  • PlayerTwo 💀 已死亡
  • PlayerThree ✅ 存活

🔴 离线:
  • PlayerFour
  • PlayerFive
```

#### 查看服务器信息
```
!info
```

**回复示例：**
```
🖥️ 服务器: [EU] Awesome Server
🗺️ 地图: Procedural Map (3500m)
👥 在线人数: 87/150
```

#### 查看队友位置
```
!pos
```

**回复示例：**
```
📍 队友位置:
  ✅ PlayerOne: (1250, 2340)
  💀 PlayerTwo: (980, 1560)
  ✅ PlayerThree: (1305, 2298)
```

## 🎯 实战场景

### 场景 1: 夜间活动

队友想知道现在是白天还是黑夜：

```
队友: 现在白天还是黑夜？
你: !time
机器人: 🌙 游戏时间: 22:15
       🌅 日出: 06:30
       🌇 日落: 18:45
```

### 场景 2: 等待队友

想知道谁在线：

```
你: !online
机器人: 👥 队伍成员 (2/4 在线):
       
       🟢 在线:
         • You ✅ 存活
         • Friend ✅ 存活
       
       🔴 离线:
         • Player3
         • Player4
```

### 场景 3: 集合队伍

想知道队友在哪：

```
你: !pos
机器人: 📍 队友位置:
       ✅ You: (1250, 2340)
       ✅ Friend: (1305, 2298)
```

然后你可以告诉队友来你的位置集合。

## 📊 后台监控

在后端控制台，你可以看到命令执行的日志：

```
💬 [PlayerOne]: !time
🎮 收到命令: !time (来自 PlayerOne)
✅ 命令执行成功: !time
📨 发送消息到 server123: ☀️ 游戏时间: 14:23...
```

## 🎁 自动事件通知

除了主动发送命令，机器人还会自动监听游戏事件并发送通知！

### 玩家死亡自动通知 ⭐

**默认开启**。当队友死亡时，机器人会自动在队伍聊天发送消息：

```
游戏中显示：
💀 PlayerTwo 在 (1250, 2340) 死亡了！
```

后端控制台也会记录：
```
💀 [server123] PlayerTwo 死亡
📨 已发送死亡通知: PlayerTwo
```

### 玩家重生自动通知 ⭐

**默认开启**。当队友重生时，机器人会自动发送：

```
游戏中显示：
✨ PlayerTwo 重生了！
```

### 控制自动通知

可以使用 `!notify` 命令控制自动通知的开关：

```
!notify                # 查看当前设置
!notify death off      # 关闭死亡通知
!notify death on       # 开启死亡通知
!notify spawn off      # 关闭重生通知
!notify spawn on       # 开启重生通知
```

### 其他事件

这些事件在后端控制台记录（不自动发送聊天消息）：

```
🟢 [server123] PlayerThree 上线
🔴 [server123] PlayerFour 下线
```

这些事件可以用来触发自定义逻辑，例如：
- 上线时自动问候
- 下线时记录时长
- 基于事件触发其他自动化操作

## 🔧 添加自定义命令

想要添加自己的命令？非常简单！

### 示例：添加一个问候命令

编辑 `/backend/src/app.js`，在文件末尾添加：

```javascript
// 获取命令服务
const commandsService = rustPlusService.getCommandsService();

// 注册自定义命令
commandsService.registerCommand('hello', {
  description: '向机器人问好',
  usage: '!hello',
  handler: async (serverId, args, context) => {
    return `👋 你好, ${context.name}! 欢迎使用机器人！`;
  }
});

console.log('✅ 自定义命令已加载');
```

重启后端，然后在游戏中输入：

```
!hello
```

机器人会回复：

```
👋 你好, YourName! 欢迎使用机器人！
```

## 📚 进阶学习

现在你已经掌握了基础用法！继续学习：

1. **[完整命令列表](./COMMANDS_GUIDE.md#可用命令)** - 查看所有内置命令
2. **[自定义命令开发](./COMMANDS_GUIDE.md#自定义命令)** - 学习如何开发复杂命令
3. **[事件系统](./EVENTS_GUIDE.md)** - 了解如何监听和响应游戏事件
4. **[高级示例](./COMMANDS_GUIDE.md#高级示例)** - 查看更多实用命令示例

## ❓ 遇到问题？

### 机器人没有回复

**可能原因：**
1. 后端未启动
2. 服务器未连接（在 Dashboard 中检查）
3. 不在队伍中
4. 命令拼写错误

**解决方法：**
1. 检查后端控制台是否有错误日志
2. 在 Dashboard 中确认服务器已连接
3. 输入 `!help` 查看正确的命令列表

### 命令响应慢

**可能原因：**
- 网络延迟
- Rust+ API 限流

**解决方法：**
- 等待几秒钟
- 避免频繁发送命令

### 看不到队友信息

**可能原因：**
- 不在队伍中
- 队友不在线

**解决方法：**
- 确保已组队
- 使用 `!online` 查看谁在线

## 💡 提示与技巧

1. **命令不区分大小写** - `!TIME` 和 `!time` 效果一样

2. **查看后端日志** - 可以帮助你理解机器人的行为

3. **组合使用** - 先用 `!online` 查看谁在线，再用 `!pos` 查看位置

4. **快捷方式** - 将常用命令保存到游戏的聊天历史中，方便快速输入

## 🎉 享受游戏！

现在你已经掌握了 Rust+ 机器人的基础用法。继续探索，创造更多有趣的命令和自动化功能！

---

**下一步：**
- 📖 阅读 [完整命令指南](./COMMANDS_GUIDE.md)
- 🎯 学习 [事件系统](./EVENTS_GUIDE.md)
- 🏗️ 了解 [系统架构](./ARCHITECTURE.md)

